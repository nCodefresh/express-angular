version: '1.0'
steps:

  generate-tag:
    image: node:latest
    working-directory: ${{main_clone}}
    commands:
      - ls -a
      - pwd
      - npm install

  build_project:
    type: build
    description: codefresh example
    working_directory: ${{main_clone}}
    image-name: ncodefresh/express-angular-test
    dockerfile: Dockerfile
    tag: '${{CF_SHORT_REVISION}}'

#  push-to-dockerhub:
#    type: push
#    candidate: ${{build-project}}
#    tag: ${{CF_SHORT_REVISION}}
#    credentials:
#      username: ${{user}}
#      password: ${{pass}}
