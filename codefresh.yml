version: '1.0'
steps:

  generate-tag:
    image: node:latest
    working-directory: ${{main_clone}}
    commands:
      - cf_export TAG=qwerty

  build_project:
    type: build
    description: codefresh example
    working_directory: ${{main_clone}}
    image-name: ncodefresh/express-angular-test
    dockerfile: Dockerfile
    tag: codefresh

  push-to-dockerhub:
    type: push
    candidate: ${{build_project}}
    registry: docker-hub
    tag: ${{TAG}}