version: '1.0'
steps:
#  shallow_clone:
#    title: Create Shallow Clone
#    image: codefreshio/git-image:latest
#    commands:
##      - echo ${{CF_VOLUME_NAME}}
#      #- echo ${{main_clone}}
#      - echo git clone --depth=1 'file://${{CF_VOLUME_PATH}}' '${{CF_VOLUME_PATH}}/shallow-clone'
#      - git clone --depth=1 'file://${{CF_VOLUME_PATH}}' '${{CF_VOLUME_PATH}}/shallow-clone'



  BuildingDockerImage:
    title: Building Docker Image
    type: build
    image_name: ncodefresh/test_next_frontend
    dockerfile: Dockerfile
    tag: '${{CF_BRANCH_TAG_NORMALIZED}}'

  PushingToDockerRegistry:
    title: Pushing to Docker Registry
    type: push
    candidate: '${{BuildingDockerImage}}'
    tag: '${{CF_BRANCH_TAG_NORMALIZED}}'
    registry: gcr

#  build_step:
#    type: build
#    image-name: ncodefresh/ncodefresh
#    build_arguments:
#      - arg=argument
#
#  push-to-dockerhub:
#    type: push
#    candidate: ${{build_step}}
#    registry: gcr
#    tag: